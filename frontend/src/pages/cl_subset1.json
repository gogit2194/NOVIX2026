[
 [
  2,
  " * 文枢 WenShape - 深度上下文感知的智能体小说创作系统"
 ],
 [
  44,
  " * WritingSessionContent - 写作会话主流程组件"
 ],
 [
  46,
  " * 统一的写作 IDE 界面，集成 AI 写作、编辑、分析等功能。"
 ],
 [
  47,
  " * 使用 IDE Layout 提供三段式布局（活动栏、左侧面板、编辑区、右侧面板、底部状态栏）。"
 ],
 [
  49,
  " * 主要功能："
 ],
 [
  50,
  " * - 实时 WebSocket 连接管理和消息处理"
 ],
 [
  51,
  " * - 章节内容编辑和版本管理"
 ],
 [
  52,
  " * - AI 驱动的写作、编辑、分析建议"
 ],
 [
  53,
  " * - 交互式对话和反馈流程"
 ],
 [
  54,
  " * - 草稿保存和历史记录"
 ],
 [
  57,
  " * @param {boolean} [isEmbedded=false] - 是否为嵌入模式（默认完整模式）"
 ],
 [
  58,
  " * @returns {JSX.Element} 写作会话主界面"
 ],
 [
  66,
  "    // 项目和会话基本信息 / Project and Session Information"
 ],
 [
  68,
  "    // 项目数据状态 / Project data from API"
 ],
 [
  79,
  "    // 项目切换时清理所有会话状态，防止数据污染"
 ],
 [
  80,
  "    // 使用 useRef 判断 projectId 是否真正变化，避免不必要的清理"
 ],
 [
  83,
  "            // 项目真正切换了：清理所有写作会话状态"
 ],
 [
  161,
  "    // AI 锁定章：写作/编辑进行中时，右侧面板锁死在该章节（中央可切换查看/手改其他章节）"
 ],
 [
  168,
  "    // 轻提示（不打断、不强跳转）"
 ],
 [
  285,
  "                if (data.type === 'start_ack') appendProgressEvent({ stage: 'session_start', message: '会话已启动' }, wsChapterKey);"
 ],
 [
  367,
  "                        pushNotice(`第 ${wsChapterKey} 章撰写完成，可切换查看。`);"
 ],
 [
  377,
  "                    addMessage('assistant', '草稿已生成，可继续反馈或手动编辑。', wsChapterKey);"
 ],
 [
  409,
  "                            appendProgressEvent({ stage: 'connection', message: '连接中断，正在重连…' }, NO_CHAPTER_KEY);"
 ],
 [
  412,
  "                            appendProgressEvent({ stage: 'connection', message: '连接已恢复' }, NO_CHAPTER_KEY);"
 ],
 [
  415,
  "                            appendProgressEvent({ stage: 'connection', message: '连接已断开' }, NO_CHAPTER_KEY);"
 ],
 [
  555,
  "    // 监听 Context 中的 Dialog 状态"
 ],
 [
  577,
  "        // 缓存当前章节内容，避免切章丢失"
 ],
 [
  583,
  "        // 非写作/编辑进行中：切章时清理流式与差异态"
 ],
 [
  589,
  "            pushNotice(`正在撰写第 ${lockedKey} 章，AI 面板已锁定；已切换查看第 ${nextChapterKey} 章。`);"
 ],
 [
  598,
  "        // 优先使用本地缓存，减少切章时的“空白闪烁”"
 ],
 [
  646,
  "            addMessage('system', `已创建章节：${normalizedChapter}`, normalizedChapter);"
 ],
 [
  652,
  "            addMessage('error', '创建章节失败: ' + e.message);"
 ],
 [
  697,
  "    // Auto Save（类似 VSCode：检测到变更后自动保存）"
 ],
 [
  735,
  "                addMessage('error', '自动保存失败: ' + (e.response?.data?.detail || e.message));"
 ],
 [
  779,
  "    // 当资源管理器清空/删除当前章节时，主动回到空态，避免编辑区残留旧章节内容"
 ],
 [
  870,
  "                    pushNotice(`第 ${resolvedChapterKey} 章撰写完成，可切换查看。`);"
 ],
 [
  893,
  "    // 监听 Context 中的文档选择（章节或卡片）"
 ],
 [
  954,
  "                    addMessage('error', '加载卡片详情失败: ' + e.message);"
 ],
 [
  967,
  "            alert('请先选择章节');"
 ],
 [
  990,
  "        appendProgressEvent({ stage: 'session_start', message: '正在准备上下文…' }, chapterKey);"
 ],
 [
  995,
  "                chapter_title: chapterInfo.chapter_title || `章节 ${chapter}`,"
 ],
 [
  1004,
  "                throw new Error(result.error || '会话启动失败');"
 ],
 [
  1009,
  "                    appendProgressEvent({ stage: 'scene_brief', message: '场景简报已生成（可展开查看）', payload: result.scene_brief }, chapterKey);"
 ],
 [
  1022,
  "                appendProgressEvent({ stage: 'scene_brief', message: '场景简报已生成（可展开查看）', payload: result.scene_brief }, chapterKey);"
 ],
 [
  1046,
  "                addMessage('assistant', '草稿已生成，可继续反馈或手动编辑。', chapterKey);"
 ],
 [
  1049,
  "            addMessage('error', '启动失败: ' + e.message, chapterKey);"
 ],
 [
  1077,
  "                throw new Error(result.error || '回答问题失败');"
 ],
 [
  1084,
  "                    appendProgressEvent({ stage: 'scene_brief', message: '场景简报已生成（可展开查看）', payload: result.scene_brief }, chapterKey);"
 ],
 [
  1096,
  "                appendProgressEvent({ stage: 'scene_brief', message: '场景简报已生成（可展开查看）', payload: result.scene_brief }, chapterKey);"
 ],
 [
  1119,
  "                addMessage('assistant', '草稿已生成，可继续反馈或手动编辑。', chapterKey);"
 ]
]
