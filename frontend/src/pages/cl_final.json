{"text": "L2:  * ���� WenShape - ��������ĸ�֪��������С˵����ϵͳ\r\nL44:  * WritingSessionContent - д���Ự���������\r\nL46:  * ͳһ��д�� IDE ���棬���� AI д�����༭�������ȹ��ܡ�\r\nL47:  * ʹ�� IDE Layout �ṩ����ʽ���֣�����������塢�༭�����Ҳ���塢�ײ�״̬������\r\nL49:  * ��Ҫ���ܣ�\r\nL50:  * - ʵʱ WebSocket ���ӹ�������Ϣ����\r\nL51:  * - �½����ݱ༭�Ͱ汾����\r\nL52:  * - AI ������д�����༭����������\r\nL53:  * - ����ʽ�Ի��ͷ�������\r\nL54:  * - �ݸ屣�����ʷ��¼\r\nL57:  * @param {boolean} [isEmbedded=false] - �Ƿ�ΪǶ��ģʽ��Ĭ������ģʽ��\r\nL58:  * @returns {JSX.Element} д���Ự������\r\nL66:     // ��Ŀ�ͻỰ������Ϣ / Project and Session Information\r\nL68:     // ��Ŀ����״̬ / Project data from API\r\nL79:     // ��Ŀ�л�ʱ�������лỰ״̬����ֹ������Ⱦ\r\nL80:     // ʹ�� useRef �ж� projectId �Ƿ������仯�����ⲻ��Ҫ������\r\nL83:             // ��Ŀ�����л��ˣ���������д���Ự״̬\r\nL161:     // AI �����£�д��/�༭������ʱ���Ҳ���������ڸ��½ڣ�������л��鿴/�ָ������½ڣ�\r\nL168:     // ����ʾ������ϡ���ǿ��ת��\r\nL285:                 if (data.type === 'start_ack') appendProgressEvent({ stage: 'session_start', message: '�Ự������' }, wsChapterKey);\r\nL367:                         pushNotice(`�� ${wsChapterKey} ��׫д��ɣ����л��鿴��`);\r\nL377:                     addMessage('assistant', '�ݸ������ɣ��ɼ����������ֶ��༭��', wsChapterKey);\r\nL409:                             appendProgressEvent({ stage: 'connection', message: '�����жϣ�����������' }, NO_CHAPTER_KEY);\r\nL412:                             appendProgressEvent({ stage: 'connection', message: '�����ѻָ�' }, NO_CHAPTER_KEY);\r\nL415:                             appendProgressEvent({ stage: 'connection', message: '�����ѶϿ�' }, NO_CHAPTER_KEY);\r\nL555:     // ���� Context �е� Dialog ״̬\r\nL577:         // ���浱ǰ�½����ݣ��������¶�ʧ\r\nL583:         // ��д��/�༭�����У�����ʱ������ʽ�����̬\r\nL589:             pushNotice(`����׫д�� ${lockedKey} �£�AI ��������������л��鿴�� ${nextChapterKey} �¡�`);\r\nL598:         // ����ʹ�ñ��ػ��棬��������ʱ�ġ��հ���˸��\r\nL646:             addMessage('system', `�Ѵ����½ڣ�${normalizedChapter}`, normalizedChapter);\r\nL652:             addMessage('error', '�����½�ʧ��: ' + e.message);\r\nL697:     // Auto Save������ VSCode����⵽������Զ����棩\r\nL735:                 addMessage('error', '�Զ�����ʧ��: ' + (e.response?.data?.detail || e.message));\r\nL779:     // ����Դ���������/ɾ����ǰ�½�ʱ�������ص���̬������༭���������½�����\r\nL870:                     pushNotice(`�� ${resolvedChapterKey} ��׫д��ɣ����л��鿴��`);\r\nL893:     // ���� Context �е��ĵ�ѡ���½ڻ�Ƭ��\r\nL954:                     addMessage('error', '���ؿ�Ƭ����ʧ��: ' + e.message);\r\nL967:             alert('����ѡ���½�');\r\nL990:         appendProgressEvent({ stage: 'session_start', message: '����׼�������ġ�' }, chapterKey);\r\nL995:                 chapter_title: chapterInfo.chapter_title || `�½� ${chapter}`,\r\nL1004:                 throw new Error(result.error || '�Ự����ʧ��');\r\nL1009:                     appendProgressEvent({ stage: 'scene_brief', message: '�����������ɣ���չ���鿴��', payload: result.scene_brief }, chapterKey);\r\nL1022:                 appendProgressEvent({ stage: 'scene_brief', message: '�����������ɣ���չ���鿴��', payload: result.scene_brief }, chapterKey);\r\nL1046:                 addMessage('assistant', '�ݸ������ɣ��ɼ����������ֶ��༭��', chapterKey);\r\nL1049:             addMessage('error', '����ʧ��: ' + e.message, chapterKey);\r\nL1077:                 throw new Error(result.error || '�ش�����ʧ��');\r\nL1084:                     appendProgressEvent({ stage: 'scene_brief', message: '�����������ɣ���չ���鿴��', payload: result.scene_brief }, chapterKey);\r\nL1096:                 appendProgressEvent({ stage: 'scene_brief', message: '�����������ɣ���չ���鿴��', payload: result.scene_brief }, chapterKey);\r\nL1119:                 addMessage('assistant', '�ݸ������ɣ��ɼ����������ֶ��༭��', chapterKey);\r\nL1123:             addMessage('error', '����ʧ��: ' + e.message, chapterKey);\r\nL1135:         appendProgressEvent({ stage: 'scene_brief', message: '�����������ɣ���չ���鿴��', payload: data }, chapterOverride);\r\nL1152:         addMessage('assistant', '�ݸ������ɣ��ɼ����������ֶ��༭��', chapterOverride);\r\nL1169:         addMessage('assistant', '�ո�����ɡ�', chapterOverride);\r\nL1192:             addMessage('user', `�޸�ָ�${textToSubmit}`);\r\nL1193:             appendProgressEvent({ stage: 'edit_suggest', message: '�������ɲ����޸Ľ��顭' });\r\nL1223:                     addMessage('system', '��⵽�޸Ľ������ƽضϣ����Զ�����ԭ��ĩβ��������졣');\r\nL1230:                     throw new Error('δ�����ɿ�Ӧ�õĲ����޸ģ��븴��ճ��Ҫ�޸ĵ�ԭ��/���䣬��ʹ�á�ѡ���༭�����о�ȷ��λ��');\r\nL1235:                     message: `�����޸Ľ��������ɣ�${diff.stats.additions || 0} ���� / ${diff.stats.deletions || 0} ɾ����`\r\nL1240:                     reason: lastFeedbackRef.current || '�����û�ָ����е���'\r\nL1255:                 addMessage('assistant', '�����ɲ����޸Ľ��飺�ɲ鿴���첢ѡ�񡰽��ܡ��򡰳�������');\r\nL1262:             addMessage('error', '�༭ʧ��: ' + e.message);\r\nL1445:                 throw new Error('��Ƭ���Ʋ���Ϊ��');\r\nL1513:             addMessage('system', '��Ƭ�Ѹ���');\r\nL1517:             addMessage('error', '��Ƭ����ʧ��: ' + (detail || e.message));\r\nL1550:                                     <p className=\"text-xs text-ink-400 font-mono uppercase tracking-wider\">{activeCard.type === 'character' ? '��ɫ��Ƭ' : '���翨Ƭ'}</p>\r\nL1559:                                 title=\"�رտ�Ƭ�༭\"\r\nL1568:                                 <label className=\"text-xs font-bold text-ink-500 tracking-wider\">����</label>\r\nL1577:                                 <label className=\"text-xs font-bold text-ink-500 tracking-wider\">�Ǽ�</label>\r\nL1583:                                     <option value={3}>���ǣ������ע��</option>\r\nL1584:                                     <option value={2}>���ǣ���Ҫ��</option>\r\nL1585:                                     <option value={1}>һ�ǣ���ѡ��</option>\r\nL1590:                                 <label className=\"text-xs font-bold text-ink-500 tracking-wider\">����</label>\r\nL1594:                                     placeholder=\"��������ö��ŷָ�\"\r\nL1602:                                         <label className=\"text-xs font-bold text-ink-500 tracking-wider\">���</label>\r\nL1606:                                             placeholder=\"����Ԫ�����\"\r\nL1611:                                         <label className=\"text-xs font-bold text-ink-500 tracking-wider\">����</label>\r\nL1624:                                             placeholder=\"ÿ��һ������\"\r\nL1628:                                         <label className=\"text-xs font-bold text-ink-500 tracking-wider\">���ɱ�</label>\r\nL1634:                                             <option value=\"unset\">δ����</option>\r\nL1635:                                             <option value=\"true\">���ɱ�</option>\r\nL1636:                                             <option value=\"false\">�ɱ�</option>\r\nL1644:                                 <label className=\"text-xs font-bold text-ink-500 tracking-wider\">����</label>\r\nL1657:                                     placeholder=\"���Ҫ����\"\r\nL1673:                                 <span className=\"brand-logo text-4xl text-ink-900/40\">����</span>\r\nL1676:                                 �������ѡ����Դ����ʹ�ÿ�ݼ� Cmd+B �л����\r\nL1698:                                 placeholder=\"�������½ڱ���\"\r\nL1711:                                     originalVersion=\"��ǰ����\"\r\nL1712:                                     revisedVersion=\"�޸Ľ���\"\r\nL1766:                                     placeholder=\"��ʼд��...\"\r\nL1788:                         ? `AI ����׫д�� ${String(aiLockedChapter)} �£��Ҳ�Ի������������л��ظ��½ڼ�����`\r\nL1793:                         ? `��ѡ�� ${countChars(selectionInfo.text)} �֣�δ���ӣ�`\r\nL1798:                         ? `������ѡ�� ${countChars(attachedSelection.text)} ��`\r\nL1837:                         addMessage('system', '����ѡ���½ڡ�');\r\nL1843:                             addMessage('system', '���ķǿգ����ʽ�������Ϊ��ʱ���ã����л����༭ģʽ��');\r\nL1888:             : (chapterInfo.chapter ? (chapterInfo.chapter_title || `�½� ${chapterInfo.chapter}`) : null),\r\nL1889:         aiHint: agentBusy && aiLockedChapter ? `����׫д�� ${String(aiLockedChapter)} ��` : null,\r\nL1943:  * WritingSession - д���Ự���\r\nL1944:  * �ṩ IDE �����Ĳ���Ⱦ��������\r\n"}